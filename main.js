(()=>{"use strict";class t{constructor(t,e,n,s){this.title=t,this.notes=e,this.dueDate=n,this.priority=s,this.log=new Date,this.done=!1}}class e{constructor(t){this.title=t,this.items=[]}addItem(t){this.items.push(t)}}const n=function(){let n=new e("Your project"),s=JSON.parse(localStorage.getItem("projects"))||[],i=s[0]||n;function c(){localStorage.setItem("projects",JSON.stringify(s))}return{getActiveProject:()=>i,setActiveProject:t=>{i=t},getProjects:()=>s,addNewProject:function(t){let n=new e(t);return s.push(n),i=n,c(),n},newItem:function(e){let n=new t(e.title.value,e.notes.value,e.dueDate.value,e.priority.value);return i.items.push(n),c(),n},deleteTask:function(t){let e=i.items.indexOf(t);i.items.splice(e,1),c()},deleteProject:function(){let t=s.indexOf(i);s.splice(t,1),console.log(s),i=s[0]||n,c()}}}();!function(){const t=document.getElementById("item-board"),e=document.getElementById("new-task-btn"),s=document.getElementById("task-modal"),i=document.getElementById("task-form"),c=document.getElementById("task-submit"),l=document.getElementById("project-list"),o=document.getElementById("new-proj-btn"),d=document.getElementById("project-modal"),r=document.getElementById("project-form"),a=document.getElementById("project-submit"),u=document.getElementById("proj-del-btn");function m(t){let e=document.createElement("li");e.textContent=t.title,e.setAttribute("class","project-title"),e.addEventListener("click",(()=>{n.setActiveProject(t),g(e),f()})),t===n.getActiveProject()&&g(e),l.appendChild(e)}function p(e){let s=document.createElement("div"),i=document.createElement("div");s.setAttribute("class","task-card"),i.setAttribute("class","del-btn"),i.innerHTML='<i class="fas fa-trash-alt"></i>',i.addEventListener("click",(()=>{n.deleteTask(e),f()})),s.innerHTML=`\n            <h3 class="task-title">${e.title}</h3>\n            <div class="task-content"><span class="task-due">Due:<time>${e.dueDate}</time></span>\n            <p class="task-notes">${e.notes}</p></div>\n           `,"high"==e.priority?s.classList.add("urgent"):"med"==e.priority?s.classList.add("medium-pri"):s.classList.add("low-pri"),s.appendChild(i),t.appendChild(s)}function y(){l.textContent="";for(let t of n.getProjects())m(t)}function f(){let e=n.getActiveProject().items;t.textContent="";for(let t of e)p(t)}function g(t){let e=document.querySelectorAll(".project-title");for(let t of e)t.style.backgroundColor="transparent";t.style.backgroundColor="#a7dbf3"}f(),y(),e.addEventListener("click",(()=>{s.style.display="block"})),c.addEventListener("click",(()=>{s.style.display="none",p(n.newItem(i))})),o.addEventListener("click",(()=>{d.style.display="block"})),a.addEventListener("click",(()=>{d.style.display="none",m(n.addNewProject(r.title.value)),f()})),u.addEventListener("click",(()=>{n.deleteProject(),y(),f()}))}()})();